import{r as q,c as $,a as C,b as N,o as S,d as F,i as c,e as g,f as M,t as a,p as T,F as v,S as k,m as A,u as I,C as w}from"./vendor.891c9517.js";const P=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&f(i)}).observe(document,{childList:!0,subtree:!0});function p(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function f(r){if(r.ep)return;r.ep=!0;const s=p(r);fetch(r.href,s)}};P();var G=["pediatric_2yo"];const B=a("<p>select a dataset:&nbsp;<select></select></p>"),K=a("<p>select a feature:&nbsp;<select></select></p>"),R=a('<p>select a cutoff:&nbsp;<input type="number" step="0.1" min="0" max="10"></p>'),z=a('<p>select mode:&nbsp;<select><option value="g">greater than</option><option value="l">lesser or equal than</option></select></p>'),H=a("<p><button>subset</button></p>"),J=a("<p><button>reset</button></p>"),Q=a("<p>disp gene: </p>"),U=a("<p>cutoff: </p>"),V=a("<p>comparison set to: <!> than</p>"),W=a('<canvas id="chart"></canvas>'),L=a("<option></option>"),X=a("<p>please input gene and cutoff</p>");q(()=>{let d=null,u=null,p={type:"scatter",data:null,options:null};const[f,r]=$(G[0]),[s,i]=$(null),[j,x]=$(null,{equals:!1}),[m,_]=$(null),[y,O]=$(!0),[h]=C(f,async e=>await fetch(`${e}/cells.json`).then(n=>n.json())),[E]=C(j,async e=>await fetch(`${I(f)}/gene/${e}.json`).then(n=>n.json()));return N(S(E,e=>{u=new Set;for(const n in e)e[n][1]>m()&&u.add(e[n][0]);d.update()},{defer:!0})),N(S(h,e=>{const n=T("mpn65",Object.keys(e.cells).length).map(t=>`rgb(${parseInt(t.slice(0,2),16)}, ${parseInt(t.slice(2,4),16)}, ${parseInt(t.slice(4,6),16)}`);p.data={datasets:Array.from(Object.keys(e.cells),t=>{let l=[],o=[];return e.cells[t].forEach(b=>{l.push(b[0]),o.push({x:b[3],y:b[4]})}),{data:o,label:t}})},p.options={elements:{point:{radius:1.2,backgroundColor:t=>u!==null?I(y)?`${n[t.datasetIndex]}, ${u.has(e.cells[t.dataset.label][t.dataIndex][0])?1:0})`:`${n[t.datasetIndex]}, ${u.has(e.cells[t.dataset.label][t.dataIndex][0])?0:1})`:`${n[t.datasetIndex]}, 1)`}},plugins:{tooltip:{callbacks:{label:t=>e.cells[t.dataset.label][t.dataIndex][0]}},legend:{labels:{generateLabels:t=>Array.from(w.defaults.plugins.legend.labels.generateLabels(t),(l,o)=>(l.fillStyle=`${n[o]}, 1)`,l))}}}},d.update()},{defer:!0})),F(()=>{d=new w("chart",p)}),[(()=>{const e=B.cloneNode(!0),n=e.firstChild,t=n.nextSibling;return t.$$input=l=>{r(l.currentTarget.value)},c(t,g(v,{each:G,children:l=>(()=>{const o=L.cloneNode(!0);return o.value=l,c(o,l),o})()})),e})(),(()=>{const e=K.cloneNode(!0),n=e.firstChild,t=n.nextSibling;return t.$$input=l=>{i(l.currentTarget.value)},c(t,g(k,{get when(){return!h.loading},get fallback(){return"loading cell data ..."},get children(){return g(v,{get each(){return h().genes},get fallback(){return"loading button ..."},children:l=>(()=>{const o=L.cloneNode(!0);return o.value=l,c(o,l),o})()})}})),e})(),(()=>{const e=R.cloneNode(!0),n=e.firstChild,t=n.nextSibling;return t.$$input=l=>{_(parseFloat(l.currentTarget.value))},e})(),(()=>{const e=z.cloneNode(!0),n=e.firstChild,t=n.nextSibling;return t.$$input=l=>{O(l.currentTarget.value=="g")},e})(),g(k,{get when(){return A(()=>s()!==null,!0)()&&m()!==null},get fallback(){return X.cloneNode(!0)},get children(){const e=H.cloneNode(!0),n=e.firstChild;return n.$$click=()=>x(s()),e}}),(()=>{const e=J.cloneNode(!0),n=e.firstChild;return n.$$click=()=>{u=null,i(null),_(null),d.update()},e})(),(()=>{const e=Q.cloneNode(!0);return e.firstChild,c(e,s,null),e})(),(()=>{const e=U.cloneNode(!0);return e.firstChild,c(e,m,null),e})(),(()=>{const e=V.cloneNode(!0),n=e.firstChild,t=n.nextSibling;return t.nextSibling,c(e,()=>y()?"greater":"lesser or equal",t),e})(),W.cloneNode(!0)]},document.getElementById("root"));M(["input","click"]);
